## Контекст выполнения запроса

### Как задается контекст

На API Online почти все запросы работают к контексте конкретного дилерского центра.
Поэтому в любом запросе должна быть возможность определить id дилера для создания контекста.

Например, список автомобилей всегда формируется для конкретного дилера. Заявка создается всегда в конкретном дилере и т.д.

Если в запросе к API Online нет явно указанного параметра dealer_id, то будет взят дефолтный
дилер, привязанный к access-token в настройках еКредита (вкладка F&I Hub).

Установить dealer_id вместо дефолтного можно только одним способом - передать его в GET или POST параметрах запроса.

Если передан параметр dealer_id, то будет выполнена проверка: может ли указанный dealer_id работать
под данным access-token. Поскольку access-token - это по сути идентификатор дилерской группы, то переданный dealer_id 
должен принадлежать той же группе, что и access-token. Если переданный dealer_id не принадлежит данной группе, то будет
использован контекст для дефолтного дилера.

TODO: dealer_id в get и в POST для метода newapp - описать логику.

Проверить, удалось ли установить требуемый контекст, можно по служебному полю, которое отдается во всех запросах. 
Это составное поле context, которое описывает текущее окружение, в котором отработал запрос.


### Описание контекста

Пример того, как выглядит служебное поле context:

```json
{
    "error_code": 200,
    "error_text": "Ok",
    "response": {
        "client_application_id": "",
        "application_id": 383,
        "notice": {
            "message": null
        }
    },
    "id": null,
    "context": {
        "dealer_id": 437,
        "user_id": 101,
        "environment": "12",
        "bus_api": "http://auto.bankbus.ru/b2b/api/v1.2",
        "ecredit_api_url": "https://test2-auto.e-credit.one"
    }
}
```

`dealer_id` - id дилера
 
`user_id` - id пользователя
 
`environment` - служебный параметр для тестовой среды
 
`bus_api` - служебный параметр для тестовой среды

`ecredit_api_url` - точка входа еКредит, к которой обращается API Online
